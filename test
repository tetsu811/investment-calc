<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { font-family: 'PingFang TC', 'Microsoft JhengHei', sans-serif; }
        input[type=range] { -webkit-appearance: none; background: #E5E7EB; border-radius: 999px; height: 8px; cursor: pointer; width: 100%; }
        input[type=range]::-webkit-slider-thumb { -webkit-appearance: none; height: 20px; width: 20px; border-radius: 50%; background: #3B82F6; border: 2px solid white; box-shadow: 0 1px 3px rgba(0,0,0,0.3); }
        #principal::-webkit-slider-thumb { background: #10B981; }
        #alpha::-webkit-slider-thumb { background: #F59E0B; }
    </style>
</head>
<body class="bg-slate-50 p-4">
    <div class="max-w-md mx-auto bg-white rounded-2xl shadow-lg p-6 space-y-6 border border-slate-100">
        <div class="space-y-6">
            <div>
                <div class="flex justify-between mb-1"><label class="text-slate-600 font-bold text-sm">目前年齡</label><span class="text-blue-600 font-bold"><span id="age-val">35</span> 歲</span></div>
                <input type="range" id="age" min="18" max="65" value="35">
            </div>
            <div>
                <div class="flex justify-between mb-1"><label class="text-slate-600 font-bold text-sm">目前閒置本金</label><span class="text-emerald-600 font-bold" id="principal-val">25,000,000</span></div>
                <input type="range" id="principal" min="0" max="50000000" step="100000" value="25000000">
            </div>
            <div>
                <div class="flex justify-between mb-1"><label class="text-slate-600 font-bold text-sm">每月持續投入</label><span class="text-sky-500 font-bold" id="monthly-val">100,000</span></div>
                <input type="range" id="monthly" min="0" max="500000" step="1000" value="100000">
            </div>
            <div>
                <div class="flex justify-between mb-1"><label class="text-slate-600 font-bold text-sm">主動投資比例 (Alpha)</label><span class="text-amber-500 font-bold"><span id="alpha-val">40</span>%</span></div>
                <input type="range" id="alpha" min="0" max="100" value="40">
            </div>
        </div>

        <div class="bg-blue-900 text-white rounded-xl p-6 text-center shadow-inner relative overflow-hidden">
            <p class="text-xs opacity-70 mb-1">65歲 預估總資產</p>
            <h2 class="text-3xl font-black mb-2">$<span id="total-assets">0</span></h2>
            <div class="text-[10px] bg-white/10 py-1 px-2 rounded-full inline-block">年化報酬：<span id="avg-return">0</span>%</div>
            
            <div class="grid grid-cols-2 gap-2 mt-4 pt-4 border-t border-white/10 text-left">
                <div><p class="text-[9px] opacity-50">本金貢獻</p><p class="text-emerald-400 font-bold text-xs" id="p-c">$0</p></div>
                <div><p class="text-[9px] opacity-50">月投貢獻</p><p class="text-sky-300 font-bold text-xs" id="m-c">$0</p></div>
            </div>
        </div>
    </div>

    <script>
        const ids = ['age', 'principal', 'monthly', 'alpha'];
        const elements = {};
        ids.forEach(id => elements[id] = document.getElementById(id));

        function calculate() {
            const age = +elements.age.value, p = +elements.principal.value, m = +elements.monthly.value, aR = +elements.alpha.value / 100;
            
            document.getElementById('age-val').innerText = age;
            document.getElementById('principal-val').innerText = p.toLocaleString();
            document.getElementById('monthly-val').innerText = m.toLocaleString();
            document.getElementById('alpha-val').innerText = Math.round(aR * 100);

            const avgReturn = (aR * 0.12) + ((1 - aR) * 0.07);
            document.getElementById('avg-return').innerText = (avgReturn * 100).toFixed(1);

            const n = (65 - age) * 12, r = avgReturn / 12;
            if (n <= 0) { document.getElementById('total-assets').innerText = p.toLocaleString(); return; }

            const pC = p * Math.pow(1 + r, n);
            const mC = m * ((Math.pow(1 + r, n) - 1) / r);

            document.getElementById('total-assets').innerText = Math.round(pC + mC).toLocaleString();
            document.getElementById('p-c').innerText = '$' + Math.round(pC).toLocaleString();
            document.getElementById('m-c').innerText = '$' + Math.round(mC).toLocaleString();
        }

        ids.forEach(id => elements[id].addEventListener('input', calculate));
        calculate();
    </script>
</body>
</html>
